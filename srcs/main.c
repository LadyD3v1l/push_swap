/* ************************************************************************** */
/*                                                                            */
/*                                                        :::      ::::::::   */
/*   main.c                                             :+:      :+:    :+:   */
/*                                                    +:+ +:+         +:+     */
/*   By: jobraga- <jobraga-@student.42.fr>          +#+  +:+       +#+        */
/*                                                +#+#+#+#+#+   +#+           */
/*   Created: 2025/06/18 12:21:21 by jobraga           #+#    #+#             */
/*   Updated: 2025/06/18 12:21:21 by jobraga          ###   ########.fr       */
/*                                                                            */
/* ************************************************************************** */

#include "push_swap.h"

void	push_swap_upper(t_list **list_a, t_list **list_b, int size)
{
	t_list	*node;
	int		rotate;

	push_number(list_a, list_b, size);
	calculate_local_a(list_b);
	node = calculate_list(list_b);
	rotate = node->local_a;
	while (rotate < 0)
	{
		reverse_rrb(list_b);
		rotate++;
	}
	while (rotate > 0)
	{
		rotate_rb(list_b);
		rotate--;
	}
	while (ft_lstsize(*list_b) > 0)
		push_pa(list_a, list_b);
}

void	push_swap(t_list **list_a, t_list **list_b)
{
	int		len;

	len = ft_lstsize(*list_a);
	if (len == 2)
		swap_pa(list_a);
	else if (len == 3)
		push_tree(list_a);
	else if (len == 4 || len == 5)
		push_fove(list_a, list_b, len);
	else
		push_swap_upper(list_a, list_b, len);
}

int	main(int ac, char **av)
{
	int		i;
	t_list	*a;
	t_list	*b;

	i = 1;
	a = NULL;
	b = NULL;
	if (ac == 1 || ac == 2)
		return (0);
	while (i < ac)
	{
		if (ft_check_arg(av[i]))
			ft_arg_int(&a, av[i]);
		else
			ft_finish(&a);
		i++;
	}
	if (check_iden(a) == 0)
		ft_finish(&a);
	if (check_sorted(a) == 0)
		return (0);
	push_swap(&a, &b);
	ft_lstclear(&a);
	ft_lstclear(&b);
	return (0);
}

valgrind ./push_swap 31869 20170 48519 46504 45298 1399 38356 32452 33830 38478 15357 26856 45338 32253 39866 45741 28634 39735 5015 3948 34085 46395 12153 23585 46520 20296 49803 14729 22972 46223 11895 33494 35443 38152 18426 3246 11918 43199 44278 2034 20492 12790 46546 6790 9224 27557 45939 33867 13534 23978 20932 3227 29356 25395 16179 38599 29951 42348 49930 12209 39695 27816 40343 24376 32609 34355 31364 7800 41278 3875 47279 43316 16478 29065 26162 49652 2742 39698 15386 15861 31301 46373 18707 19254 42210 14896 31309 48445 41420 46627 32907 4818 30434 10098 3876 37495 9157 4128 35906 32256 9579 8979 43856 37989 40984 9583 42016 9163 8126 33271 15603 19992 44403 33351 46339 4437 43866 48052 30823 10297 9363 20477 26940 29305 16663 45354 33881 2743 23541 45524 33816 25574 20021 21857 23731 44103 13876 48562 44725 40014 4033 3401 9426 21960 10970 22922 18567 33412 12735 40680 42706 37705 18193 27476 23477 11423 48131 30974 4453 31170 8529 41562 49031 43731 44459 3777 33207 488 41015 14241 3766 48431 19163 39971 18687 2736 37866 33034 11910 7344 7509 11097 24731 45050 36901 2787 45820 32327 4292 46129 15921 47440 28342 2779 41288 36721 48929 27442 37171 32022 1414 31584 18492 30313 47700 26203 20923 9653 48767 15163 22565 21431 27269 16789 49074 20264 11304 45752 10261 49172 43073 35409 8703 46823 49040 45110 35258 16919 12516 28995 26081 23213 41460 39269 10875 24667 34454 32637 2970 12659 1462 44242 43912 7704 7542 1447 20045 28902 18517 30349 47769 26271 29803 34039 48953 16921 8071 49724 43935 16659 27073 49702 15854 26462 37415 40954 285 12588 17682 3268 17658 8854 9889 13805 13980 14924 18106 20091 3224 36549 48572 13114 18403 28657 47454 12566 31878 17100 38491 30199 35242 27652 8698 27092 34118 7589 29276 4984 26510 16050 26995 30426 46832 18332 26545 11476 12819 19977 18674 46250 32196 9950 14559 49508 8099 3819 19259 47979 16086 2536 48785 32834 36330 24893 41523 22719 14141 36038 14588 20812 21639 15755 2801 17889 19230 31049 16788 26438 22654 37529 11059 11241 46957 27706 17142 37816 34534 14333 16993 45122 1983 20381 12574 29011 40091 8702 24327 37153 37900 46857 18185 19290 29911 49395 3161 12800 1495 15871 19566 8020 17943 34903 26144 38262 31827 20802 29365 6229 749 42748 30224 16024 22914 26506 15126 4927 40854 26528 40717 32405 745 16523 40523 23069 13102 15500 11516 15986 21079 48531 18012 8076 15294 41486 13485 515 13279 33490 34825 40281 38840 23208 34440 36080 17599 6314 44220 42695 17340 1529 22066 42934 12612 138 32130 38205 32925 1851 35999 26112 49030 40031 7612 40213 27971 4487 33853 15166 29483 33435 11573 21442 40236 39834 12670 11116 15497 23448 48909 36020 22300 28070 22775 45035 48359 4787 43134 30184 19354 18719 14282 23023 14702 33909 9818 5325 32517 20087 20240 41788 20574 45972 17183 46733 12916 12078 30290 41673 38937 46888 16541 43001 24685 47640 39700 39554 38207 33213 41385 20317 48370 41916 11724 37885 48595 28833 26645 25477 35870 31133 | wc -l